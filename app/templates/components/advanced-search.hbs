<div class="title-bar">
  <h1>Broken Consort</h1>
  {{#ui-search source=pool allowAdditions=true onSelect=(action "onSearch") }}
    <input class="prompt" type="text" placeholder="quick filter">
    <div class="results"></div>
  {{/ui-search}}
</div>


<div class="ui form">
  {{#each-in param as |field filters|}}
    {{#if (is-array filters)}}
      {{#each filters as |filter|}}
        <div class="field">
          <div class="ui label">
            {{get labels field}}:
            <div class="detail">{{filter}}</div>
            <i class="delete icon" {{action "deleteFilter" field filter}}></i>
          </div>
        </div>
      {{/each}}
    {{else}}
      <div class="field">
        <div class="ui label">
          {{get labels field}}:
          <div class="detail">{{filters}}</div>
          <i class="delete icon"></i>
        </div>
      </div>
    {{/if}}
  {{/each-in}}
  <div class="ui dividing header">Add new filter</div>
  <form class="fields" {{action "addFilter" on="submit"}}>
    <div class="field">
      {{#ui-dropdown class="selection" selected=selectedField onChange=(action (mut selectedField))}}
        <div class="default text">Field</div>
        <i class="dropdown icon"></i>
        <div class="menu">
          {{#each-in labels as |field label|}}
            <div class="item" data-value="{{field}}">
              {{label}}
            </div>
          {{/each-in}}
        </div>
      {{/ui-dropdown}}
    </div>
    <div class="field">
      {{input value=filter}}
    </div>
  </form>
</div>